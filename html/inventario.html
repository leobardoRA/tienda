<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Panel GSS</title>
  <link rel="stylesheet" href="../css/inven.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    .tabla {
      max-height: 600px;
      overflow-y: auto;
      border: 1px solid #ccc;
    }
    table { width: 100%; border-collapse: collapse; }
    thead th {
      position: sticky; top: 0; background: #082236ff; color: white; z-index: 5; text-align: center;
      padding: 0.75rem; font-weight: 600;
    }
    tbody td {
      padding: 0.6rem; text-align: center; background-color: #f9f9f9;
    }
    td.celda-acciones {
      display: flex; justify-content: center; align-items: center; gap: 0.5rem; padding: 0.5rem;
    }
    .celda-acciones a, .celda-acciones button {
      width: 40px; height: 40px; font-size: 1.2rem; border-radius: 6px; display: flex; justify-content: center; align-items: center;
      transition: transform 0.2s ease, color 0.2s ease; color: #333; border: none; background: none; cursor: pointer;
    }
    .celda-acciones a:hover, .celda-acciones button:hover { transform: scale(1.2); color: #008cff; }
    .modal {
      display: none; position: fixed; z-index: 10; left: 0; top: 0; width: 100%; height: 100%; overflow: auto;
      background-color: rgba(0,0,0,0.6); justify-content: center; align-items: center;
    }
    .modal-contenido {
      background-color: #fff; margin: 3rem auto; padding: 2rem; border: 1px solid #888;
      width: 300px; border-radius: 10px; font-family: Poppins, sans-serif;
    }
    .modal-contenido input { width: 100%; margin-bottom: 10px; padding: 6px; }
    #mensaje-flotante {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #082236;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-family: Poppins, sans-serif;
      font-size: 14px;
      display: none;
      z-index: 9999;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>

  <!-- Encabezado -->
  <header class="encabezado">
    <div class="logo-area">
      <img src="../img/logo.png" alt="Logo GSS" class="logo" />
      <span class="titulo">GSS Panel</span>
    </div>
    <div class="saludo">
      <h2>¬°Hola! <span class="emoji">üëã</span></h2>
      <p>Bienvenido de nuevo</p>
    </div>
    <a href="../php/inicio.php" class="btn-cerrar">Cerrar sesi√≥n</a>
  </header>

  <!-- Layout principal -->
  <div class="layout">
    <aside class="sidebar">
      <nav>
        <ul class="menu">
          <li><a href="../html/inven.html">‚¨ÖÔ∏è inicio</a></li>
          <li><a href="../html/inventario.html">üì¶ Inventario</a></li>
          <li><a href="../html/merma.html">üóëÔ∏è Merma</a></li>
          <li><a href="../html/proveedores.html">üöö Proveedores</a></li>
          <li><a href="../html/editar_usuario.html">‚öôÔ∏è Editar perfil</a></li>
          <li><a href="../html/reportes.html">üìä Reportes</a></li>
          <li><a href="../html/ayuda.html">‚ùì Ayuda</a></li>
        </ul>
      </nav>
    </aside>

    <main>
      <!-- Acciones -->
      <section class="acciones panel-acciones">
        <button onclick="abrirAgregar()">‚ûï Agregar producto</button>
        <button id="totalProductos">Total: 0</button>
      </section>

      <!-- Tabla de inventario -->
      <section class="tabla">
        <table>
          <thead>
            <tr>
              <th>Producto</th>
              <th>Marca</th>
              <th>Categor√≠a</th>
              <th>Stock</th>
              <th>Precio</th>
              <th>Imagen</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tabla-inventario">
            <!-- Se carga din√°micamente desde cargar_inventario.php -->
          </tbody>
        </table>
      </section>
    </main>
  </div>

  <!-- Modal de edici√≥n -->
  <div id="modal-editar" class="modal">
    <div class="modal-contenido">
      <h2>Editar producto</h2>
      <form method="POST" action="../php/inventario.php">
        <input type="hidden" name="editar_id" id="editar_id">
        <label>Producto: <input type="text" name="editar_producto" id="editar_producto" required></label>
        <label>Marca: <input type="text" name="editar_marca" id="editar_marca"></label>
        <label>Categor√≠a: <input type="text" name="editar_categoria" id="editar_categoria"></label>
        <label>Stock: <input type="number" name="editar_stock" id="editar_stock" required></label>
        <label>Precio: <input type="number" step="0.01" name="editar_precio" id="editar_precio" required></label>
        <label>Fecha de caducidad: <input type="date" name="editar_fecha_cad" id="editar_fecha_cad"></label>
        <br><br>
        <button type="submit" name="guardar_edicion">Guardar cambios</button>
        <button type="button" onclick="cerrarModal()">Cancelar</button>
      </form>
    </div>
  </div>

  <!-- Modal para agregar producto -->
  <div id="modal-agregar" class="modal" style="align-items: flex-start;">
    <div class="modal-contenido" style="margin-top: 3rem;">
      <h2>‚ûï Agregar producto</h2>
      <form id="form-agregar-producto">
        <label>Producto: <input type="text" name="producto" required></label>
        <label>Marca: <input type="text" name="marca"></label>
        <label>Categor√≠a: <input type="text" name="categoria"></label>
        <label>Stock: <input type="number" name="stock" required></label>
        <label>Precio: <input type="number" step="0.01" name="precio" required></label>
        <label>Fecha de caducidad: <input type="date" name="fecha_caducidad"></label>
        <br><br>
        <button type="submit">Guardar producto</button>
        <button type="button" onclick="cerrarAgregar()">Cancelar</button>
      </form>
    </div>
  </div>

  <!-- Mensaje flotante -->
  <div id="mensaje-flotante"></div>

  <!-- Script externo -->
  <script src="../js/inventario1.js"></script>
</body>
</html>